# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r

language: R
cache: packages

script:
  - Rscript -e 'if (!requireNamespace("remotes", quietly = TRUE)) install.packages("remotes")'
  - Rscript -e 'remotes::install_deps(dependencies = TRUE)'
  - R CMD INSTALL .
  - ls -la /Users/travis/R/Library/rTRNG/libs/rTRNG.so
  - R CMD otool -L /Users/travis/R/Library/rTRNG/libs/rTRNG.so
  - ls -Rla /Users/travis/R/Library/Rcpp/libs
  - Rscript -e 'library(rTRNG);testthat::test_dir("tests/testthat")'
  - R CMD build --no-build-vignettes .
  - R CMD check *.tar.gz

matrix:
  include:
#  - r: devel
#  - r: release
#    after_success:
#    - Rscript -e 'covr::codecov()'
#  - r: oldrel
  - os: osx
    r: release
  - os: osx
    r: release
    disable_homebrew: true

warnings_are_errors: true
